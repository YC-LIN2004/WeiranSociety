# ===================================================================
# Spring Boot 應用設定
# ===================================================================
spring.application.name=Backend

# ===================================================================
# 資料庫設定 (MSSQL - WeiranSociety)
# ===================================================================
spring.datasource.url=jdbc:sqlserver://localhost:1433;databaseName=WeiranSociety;trustServerCertificate=true
spring.datasource.username=Alvin
spring.datasource.password=0420
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# JPA / Hibernate 設定
spring.jpa.database-platform=org.hibernate.dialect.SQLServerDialect
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.hibernate.naming.implicit-strategy=org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# ===================================================================
# Gmail 郵件設定
# ===================================================================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=agenting300@gmail.com
spring.mail.password=boqc hmga bqmo xirb
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# 告訴 JavaMail：這個 host 的 SSL 憑證我信任
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# 明確限制 TLS 版本，避免某些環境對 TLSv1.3 不合
spring.mail.properties.mail.smtp.ssl.protocols=TLSv1.2

# ===================================================================
# JWT 設定
# ===================================================================
app.jwt.secret=flMlpljaby07Th8wvcXLkHalrjxq88dIn37kw7YoinHTeBCq1GFZ0KbPN+d5TncWZTF2xLBzpnMJzHLdgcu9wQ==
app.jwt.expiration-ms=86400000

# ===================================================================
# Server 設定
# ===================================================================
server.address=0.0.0.0
server.port=8080

# ===================================================================
# 綠界金流 (ECPay) 設定 - 測試環境
# ===================================================================

# 商店資訊（測試環境）
ecpay.merchant.id=2000132
ecpay.hash.key=5294y06JbISpM5x9
ecpay.hash.iv=v77hoKGq4kWxNNIS

# API 端點（測試環境）
ecpay.api.url=https://payment-stage.ecpay.com.tw/Cashier/AioCheckOut/V5

# ⚠️ 重要：ReturnURL 必須使用 ngrok 提供的 HTTPS URL
# 開發時請先啟動 ngrok，然後將下方的 URL 替換成您的 ngrok URL
ecpay.return.url=https://nonpathologic-genethlialogic-ean.ngrok-free.dev

# 付款完成後導向的前端頁面（使用者看到的頁面）
ecpay.order.result.url=http://localhost:5173/paymentresult
ecpay.client.back.url=http://localhost:5173/checkout

# ===================================================================
# 綠界金流 - 正式環境設定（上線時啟用）
# ===================================================================
# ecpay.api.url=https://payment.ecpay.com.tw/Cashier/AioCheckOut/V5
# ecpay.merchant.id=您的正式商店代號
# ecpay.hash.key=您的正式HashKey
# ecpay.hash.iv=您的正式HashIV
# ecpay.return.url=https://yourdomain.com/api/payment/ecpay/return
# ecpay.order.result.url=https://yourdomain.com/paymentresult
# ecpay.client.back.url=https://yourdomain.com/checkout

# ===================================================================
# 其他建議設定
# ===================================================================

# 設定檔案上傳大小限制
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# 設定時區
spring.jackson.time-zone=Asia/Taipei
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss

# 設定編碼
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

spring.jpa.properties.hibernate.format_sql=true
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE